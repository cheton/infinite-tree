/*! infinite-tree v1.14.4 | (c) 2018 Cheton Wu <cheton@gmail.com> | MIT | https://github.com/cheton/infinite-tree */
!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.InfiniteTree=factory():root.InfiniteTree=factory()}("undefined"!=typeof self?self:this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=7)}([function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((er=arguments[1])instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){return this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;void 0!==module&&module.exports?module.exports=classNames:(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var extend=function(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(void 0===target||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=0;index<sources.length;index++){var source=sources[index];if(void 0!==source&&null!==source)for(var key in source)source.hasOwnProperty(key)&&(output[key]=source[key])}return output};exports.default=extend},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extend=__webpack_require__(2),_extend2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_extend),Node=function(){function Node(node){_classCallCheck(this,Node),this.id=null,this.parent=null,this.children=[],this.state={},(0,_extend2.default)(this,node),this.children=this.children||[]}return Node.prototype.contains=function(node){for(;node instanceof Node&&node!==this;){if(node.parent===this)return!0;node=node.parent}return!1},Node.prototype.getChildAt=function(index){var node=null;return this.children.length>0&&index>=0&&index<this.children.length&&(node=this.children[index]),node},Node.prototype.getChildren=function(){return this.children},Node.prototype.getFirstChild=function(){var node=null;return this.children.length>0&&(node=this.children[0]),node},Node.prototype.getLastChild=function(){var node=null;return this.children.length>0&&(node=this.children[this.children.length-1]),node},Node.prototype.getNextSibling=function(){var node=null;if(this.parent){var index=this.parent.children.indexOf(this);index>=0&&index<this.parent.children.length-1&&(node=this.parent.children[index+1])}return node},Node.prototype.getParent=function(){return this.parent},Node.prototype.getPreviousSibling=function(){var node=null;if(this.parent){var index=this.parent.children.indexOf(this);index>0&&index<this.parent.children.length&&(node=this.parent.children[index-1])}return node},Node.prototype.hasChildren=function(){return this.children.length>0},Node.prototype.isLastChild=function(){return!this.getNextSibling()},Node}();exports.default=Node},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var ensureArray=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return 0===args.length||void 0===args[0]||null===args[0]?[]:[].concat(1===args.length?args[0]:args)};exports.default=ensureArray},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var getElementStyle=function(el,prop){return window.getComputedStyle?window.getComputedStyle(el)[prop]:el.currentStyle[prop]},preventDefault=function(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation=function(e){void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},addEventListener=function(target,type,listener){target.addEventListener?target.addEventListener(type,listener,!1):target.attachEvent&&target.attachEvent("on"+type,listener)},removeEventListener=function(target,type,listener){target.removeEventListener?target.removeEventListener(type,listener,!1):target.detachEvent&&target.detachEvent("on"+type,listener)};exports.getElementStyle=getElementStyle,exports.preventDefault=preventDefault,exports.stopPropagation=stopPropagation,exports.addEventListener=addEventListener,exports.removeEventListener=removeEventListener},function(module,exports,__webpack_require__){"use strict";function escapeHtml(string){var str=""+string,match=matchHtmlRegExp.exec(str);if(!match)return str;var escape,html="",index=0,lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#39;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}lastIndex!==index&&(html+=str.substring(lastIndex,index)),lastIndex=index+1,html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
var matchHtmlRegExp=/["'&<>]/;module.exports=escapeHtml},function(module,exports,__webpack_require__){"use strict";var _infiniteTree=__webpack_require__(8),_infiniteTree2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_infiniteTree);module.exports=_infiniteTree2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_events=__webpack_require__(0),_events2=_interopRequireDefault(_events),_classnames=__webpack_require__(1),_classnames2=_interopRequireDefault(_classnames),_elementClass=__webpack_require__(9),_elementClass2=_interopRequireDefault(_elementClass),_isDom=__webpack_require__(10),_isDom2=_interopRequireDefault(_isDom),_flattree=__webpack_require__(11),_clusterize=__webpack_require__(13),_clusterize2=_interopRequireDefault(_clusterize),_ensureArray=__webpack_require__(4),_ensureArray2=_interopRequireDefault(_ensureArray),_extend=__webpack_require__(15),_extend2=_interopRequireDefault(_extend),_utilities=__webpack_require__(16),_lookupTable=__webpack_require__(17),_lookupTable2=_interopRequireDefault(_lookupTable),_renderer=__webpack_require__(18),_dom=__webpack_require__(5),noop=function(){},error=function(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var argIndex=0,message="Error: "+format.replace(/%s/g,function(){return args[argIndex++]});console&&console.error&&console.error(message);try{throw new Error(message)}catch(e){}},ensureNodeInstance=function(node){return!!node&&(node instanceof _flattree.Node||(error("The node must be a Node object."),!1))},createRootNode=function(rootNode){return(0,_extend2.default)(rootNode||new _flattree.Node,{parent:null,children:[],state:{depth:-1,open:!0,path:"",prefixMask:"",total:0}})},InfiniteTree=function(_events$EventEmitter){function InfiniteTree(el,options){_classCallCheck(this,InfiniteTree);var _this=_possibleConstructorReturn(this,_events$EventEmitter.call(this));return _this.options={autoOpen:!1,droppable:!1,loadNodes:null,rowRenderer:_renderer.defaultRowRenderer,selectable:!0,shouldSelectNode:null,el:null,layout:"div",noDataClass:"infinite-tree-no-data",noDataText:"No data",nodeIdAttr:"data-id",togglerClass:"infinite-tree-toggler"},_this.state={openNodes:[],rootNode:createRootNode(),selectedNode:null},_this.clusterize=null,_this.nodeTable=new _lookupTable2.default,_this.nodes=[],_this.rows=[],_this.filtered=!1,_this.scrollElement=null,_this.contentElement=null,_this.draggableTarget=null,_this.droppableTarget=null,_this.contentListener={click:function(event){event=event||window.event;var stopPropagation=event.stopPropagation;event.stopPropagation=function(){event.cancelBubble=!0,stopPropagation&&stopPropagation.call(event)},setTimeout(function(){if(!0!==event.cancelBubble&&(_this.emit("click",event),!0!==event.cancelBubble)){var itemTarget=null,clickToggler=!1;for(event.target?itemTarget=event.target!==event.currentTarget?event.target:null:event.srcElement&&(itemTarget=event.srcElement);itemTarget&&itemTarget.parentElement!==_this.contentElement;)(0,_elementClass2.default)(itemTarget).has(_this.options.togglerClass)&&(clickToggler=!0),itemTarget=itemTarget.parentElement;if(itemTarget&&!itemTarget.hasAttribute("disabled")){var id=itemTarget.getAttribute(_this.options.nodeIdAttr),node=_this.getNodeById(id);if(node)return clickToggler?void _this.toggleNode(node,{async:!0}):void _this.selectNode(node)}}},0)},dblclick:function(event){_this.emit("doubleClick",event)},keydown:function(event){_this.emit("keyDown",event)},keyup:function(event){_this.emit("keyUp",event)},dragstart:function(event){event=event||window.event,_this.draggableTarget=event.target||event.srcElement},dragend:function(event){event=event||window.event;var _this$options$droppab=_this.options.droppable.hoverClass,hoverClass=void 0===_this$options$droppab?"":_this$options$droppab;_this.draggableTarget=null,_this.droppableTarget&&((0,_elementClass2.default)(_this.droppableTarget).remove(hoverClass),_this.droppableTarget=null)},dragenter:function(event){event=event||window.event;var itemTarget=null;for(event.target?itemTarget=event.target!==event.currentTarget?event.target:null:event.srcElement&&(itemTarget=event.srcElement);itemTarget&&itemTarget.parentElement!==_this.contentElement;)itemTarget=itemTarget.parentElement;if(itemTarget&&_this.droppableTarget!==itemTarget){var _this$options$droppab2=_this.options.droppable,accept=_this$options$droppab2.accept,_this$options$droppab3=_this$options$droppab2.hoverClass,hoverClass=void 0===_this$options$droppab3?"":_this$options$droppab3;(0,_elementClass2.default)(_this.droppableTarget).remove(hoverClass),_this.droppableTarget=null;var canDrop=!0;if("function"==typeof accept){var id=itemTarget.getAttribute(_this.options.nodeIdAttr),node=_this.getNodeById(id);canDrop=!!accept.call(_this,event,{type:"dragenter",draggableTarget:_this.draggableTarget,droppableTarget:itemTarget,node:node})}canDrop&&((0,_elementClass2.default)(itemTarget).add(hoverClass),_this.droppableTarget=itemTarget)}},dragover:function(event){event=event||window.event,(0,_dom.preventDefault)(event)},drop:function(event){if(event=event||window.event,(0,_dom.preventDefault)(event),_this.draggableTarget&&_this.droppableTarget){var _this$options$droppab4=_this.options.droppable,accept=_this$options$droppab4.accept,drop=_this$options$droppab4.drop,_this$options$droppab5=_this$options$droppab4.hoverClass,hoverClass=void 0===_this$options$droppab5?"":_this$options$droppab5,id=_this.droppableTarget.getAttribute(_this.options.nodeIdAttr),node=_this.getNodeById(id),canDrop=!0;"function"==typeof accept&&(canDrop=!!accept.call(_this,event,{type:"drop",draggableTarget:_this.draggableTarget,droppableTarget:_this.droppableTarget,node:node})),canDrop&&"function"==typeof drop&&drop.call(_this,event,{draggableTarget:_this.draggableTarget,droppableTarget:_this.droppableTarget,node:node}),(0,_elementClass2.default)(_this.droppableTarget).remove(hoverClass),_this.droppableTarget=null}}},(0,_isDom2.default)(el)?options=_extends({},options,{el:el}):el&&"object"===(void 0===el?"undefined":_typeof(el))&&(options=el),_this.options=_extends({},_this.options,options),_this.create(),_this.options.data&&_this.loadData(_this.options.data),_this}return _inherits(InfiniteTree,_events$EventEmitter),InfiniteTree.prototype.create=function(){var _this2=this;if(this.options.el){var tag=null;if(this.scrollElement=document.createElement("div"),"table"===this.options.layout){var tableElement=document.createElement("table");tableElement.className=(0,_classnames2.default)("infinite-tree","infinite-tree-table");var contentElement=document.createElement("tbody");tableElement.appendChild(contentElement),this.scrollElement.appendChild(tableElement),this.contentElement=contentElement,tag="tr"}else{var _contentElement=document.createElement("div");this.scrollElement.appendChild(_contentElement),this.contentElement=_contentElement,tag="div"}this.scrollElement.className=(0,_classnames2.default)("infinite-tree","infinite-tree-scroll"),this.contentElement.className=(0,_classnames2.default)("infinite-tree","infinite-tree-content"),this.options.el.appendChild(this.scrollElement),this.clusterize=new _clusterize2.default({tag:tag,rows:[],scrollElement:this.scrollElement,contentElement:this.contentElement,emptyText:this.options.noDataText,emptyClass:this.options.noDataClass}),this.clusterize.on("clusterWillChange",function(){_this2.emit("clusterWillChange")}),this.clusterize.on("clusterDidChange",function(){_this2.emit("clusterDidChange")}),(0,_dom.addEventListener)(this.contentElement,"click",this.contentListener.click),(0,_dom.addEventListener)(this.contentElement,"dblclick",this.contentListener.dblclick),(0,_dom.addEventListener)(this.contentElement,"keydown",this.contentListener.keydown),(0,_dom.addEventListener)(this.contentElement,"keyup",this.contentListener.keyup),this.options.droppable&&((0,_dom.addEventListener)(document,"dragstart",this.contentListener.dragstart),(0,_dom.addEventListener)(document,"dragend",this.contentListener.dragend),(0,_dom.addEventListener)(this.contentElement,"dragenter",this.contentListener.dragenter),(0,_dom.addEventListener)(this.contentElement,"dragleave",this.contentListener.dragleave),(0,_dom.addEventListener)(this.contentElement,"dragover",this.contentListener.dragover),(0,_dom.addEventListener)(this.contentElement,"drop",this.contentListener.drop))}},InfiniteTree.prototype.destroy=function(){if(this.clear(),this.options.el){for((0,_dom.removeEventListener)(this.contentElement,"click",this.contentListener.click),(0,_dom.removeEventListener)(this.contentElement,"dblclick",this.contentListener.dblclick),(0,_dom.removeEventListener)(this.contentElement,"keydown",this.contentListener.keydown),(0,_dom.removeEventListener)(this.contentElement,"keyup",this.contentListener.keyup),this.options.droppable&&((0,_dom.removeEventListener)(document,"dragstart",this.contentListener.dragstart),(0,_dom.removeEventListener)(document,"dragend",this.contentListener.dragend),(0,_dom.removeEventListener)(this.contentElement,"dragenter",this.contentListener.dragenter),(0,_dom.removeEventListener)(this.contentElement,"dragleave",this.contentListener.dragleave),(0,_dom.removeEventListener)(this.contentElement,"dragover",this.contentListener.dragover),(0,_dom.removeEventListener)(this.contentElement,"drop",this.contentListener.drop)),this.clusterize&&(this.clusterize.destroy(!0),this.clusterize=null);this.contentElement.firstChild;)this.contentElement.removeChild(this.contentElement.firstChild);for(;this.scrollElement.firstChild;)this.scrollElement.removeChild(this.scrollElement.firstChild);for(var containerElement=this.options.el;containerElement.firstChild;)containerElement.removeChild(containerElement.firstChild);this.contentElement=null,this.scrollElement=null}},InfiniteTree.prototype.addChildNodes=function(newNodes,index,parentNode){var _this3=this;if(newNodes=[].concat(newNodes||[]),0===newNodes.length)return!1;if("object"===(void 0===index?"undefined":_typeof(index))?(parentNode=index||this.state.rootNode,index=parentNode.children.length):parentNode=parentNode||this.state.rootNode,!ensureNodeInstance(parentNode))return!1;"number"!=typeof index&&(index=parentNode.children.length),newNodes.forEach(function(newNode){newNode.parent=parentNode}),parentNode.children.splice.apply(parentNode.children,[index,0].concat(newNodes)),index=parentNode.children.indexOf(newNodes[0]);var deleteCount=parentNode.state.total,nodes=(0,_flattree.flatten)(parentNode.children,{openNodes:this.state.openNodes}),rows=[];rows.length=nodes.length;for(var i=0;i<nodes.length;++i){var node=nodes[i];rows[i]=this.options.rowRenderer(node,this.options)}if(parentNode===this.state.rootNode)this.nodes=nodes,this.rows=rows;else{var parentOffset=this.nodes.indexOf(parentNode);parentOffset>=0&&(this.nodes.splice.apply(this.nodes,[parentOffset+1,deleteCount].concat(nodes)),this.rows.splice.apply(this.rows,[parentOffset+1,deleteCount].concat(rows)),this.rows[parentOffset]=this.options.rowRenderer(parentNode,this.options))}return parentNode.children.slice(index).forEach(function(childNode){_this3.flattenNode(childNode).forEach(function(node){void 0!==node.id&&_this3.nodeTable.set(node.id,node)})}),this.update(),!0},InfiniteTree.prototype.appendChildNode=function(newNode,parentNode){if(parentNode=parentNode||this.state.rootNode,!ensureNodeInstance(parentNode))return!1;var index=parentNode.children.length,newNodes=[].concat(newNode||[]);return this.addChildNodes(newNodes,index,parentNode)},InfiniteTree.prototype.clear=function(){this.clusterize&&this.clusterize.clear(),this.nodeTable.clear(),this.nodes=[],this.rows=[],this.state.openNodes=[],this.state.rootNode=createRootNode(this.state.rootNode),this.state.selectedNode=null},InfiniteTree.prototype.closeNode=function(node,options){var _this4=this,_options=_extends({},options),_options$async=_options.async,async=void 0!==_options$async&&_options$async,_options$asyncCallbac=_options.asyncCallback,asyncCallback=void 0===_options$asyncCallbac?noop:_options$asyncCallbac,_options$silent=_options.silent,silent=void 0!==_options$silent&&_options$silent;if(!ensureNodeInstance(node))return!1;this.emit("willCloseNode",node);var nodeIndex=this.nodes.indexOf(node);if(nodeIndex<0)return error("Invalid node index"),!1;if(this.state.openNodes.indexOf(node)<0)return!1;node.state.collapsing=!0,this.rows[nodeIndex]=this.options.rowRenderer(node,this.options),this.update();var fn=function(){if(_this4.state.selectedNode&&_this4.state.selectedNode!==node){var selectedIndex=_this4.nodes.indexOf(_this4.state.selectedNode),_total=node.state.total,rangeFrom=nodeIndex+1,rangeTo=nodeIndex+_total;rangeFrom<=selectedIndex&&selectedIndex<=rangeTo&&_this4.selectNode(node,options)}node.state.open=!1;var openNodes=_this4.state.openNodes.filter(function(node){return node.hasChildren()&&node.state.open});_this4.state.openNodes=openNodes;for(var total=node.state.total,p=node;null!==p;p=p.parent)p.state.total=p.state.total-total;_this4.nodes.splice(nodeIndex+1,total),_this4.rows.splice(nodeIndex+1,total),node.state.collapsing=!1,_this4.rows[nodeIndex]=_this4.options.rowRenderer(node,_this4.options),_this4.update(),silent||_this4.emit("closeNode",node),"function"==typeof asyncCallback&&asyncCallback()};return async?setTimeout(fn,0):fn(),!0},InfiniteTree.prototype.filter=function(predicate,options){options=_extends({caseSensitive:!1,exactMatch:!1,filterPath:"name",includeAncestors:!0,includeDescendants:!0},options),this.filtered=!0;var rootNode=this.state.rootNode;!function traverse(node){var filterNode=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!node||!node.children)return!1;if(node===rootNode)node.state.filtered=!1;else if(filterNode)node.state.filtered=!0;else if("string"==typeof predicate){var filterText=(0,_utilities.get)(node,options.filterPath,"");Number.isFinite(filterText)&&(filterText=String(filterText)),"string"!=typeof filterText&&(filterText="");var keyword=predicate;options.caseSensitive||(filterText=filterText.toLowerCase(),keyword=keyword.toLowerCase()),node.state.filtered=options.exactMatch?filterText===keyword:filterText.indexOf(keyword)>=0}else if("function"==typeof predicate){var callback=predicate;node.state.filtered=!!callback(node)}else node.state.filtered=!1;options.includeDescendants&&(filterNode=filterNode||node.state.filtered);for(var filtered=!1,i=0;i<node.children.length;++i){var childNode=node.children[i];childNode&&(traverse(childNode,filterNode)&&(filtered=!0))}return options.includeAncestors&&filtered&&(node.state.filtered=!0),node.state.filtered}(rootNode),this.rows.length=this.nodes.length;for(var i=0;i<this.nodes.length;++i){var node=this.nodes[i];this.rows[i]=this.options.rowRenderer(node,this.options)}this.update()},InfiniteTree.prototype.flattenChildNodes=function(parentNode){if(parentNode=parentNode||this.state.rootNode,!ensureNodeInstance(parentNode))return[];for(var list=[],node=parentNode.getFirstChild();node;)if(list.push(node),node.hasChildren())node=node.getFirstChild();else{for(;null===node.getNextSibling()&&node.parent!==parentNode;)node=node.getParent();node=node.getNextSibling()}return list},InfiniteTree.prototype.flattenNode=function(node){return ensureNodeInstance(node)?[node].concat(this.flattenChildNodes(node)):[]},InfiniteTree.prototype.getChildNodes=function(parentNode){return parentNode=parentNode||this.state.rootNode,ensureNodeInstance(parentNode)?parentNode.children:[]},InfiniteTree.prototype.getNodeById=function(id){var node=this.nodeTable.get(id);if(!node){if(!(node=this.nodes.filter(function(node){return node.id===id})[0]))return null;this.nodeTable.set(node.id,node)}return node},InfiniteTree.prototype.getNodeFromPoint=function(x,y){for(var el=document.elementFromPoint(x,y);el&&el.parentElement!==this.contentElement;)el=el.parentElement;if(!el)return null;var id=el.getAttribute(this.options.nodeIdAttr);return this.getNodeById(id)},InfiniteTree.prototype.getOpenNodes=function(){return this.state.openNodes.slice()},InfiniteTree.prototype.getRootNode=function(){return this.state.rootNode},InfiniteTree.prototype.getSelectedNode=function(){return this.state.selectedNode},InfiniteTree.prototype.getSelectedIndex=function(){return this.nodes.indexOf(this.state.selectedNode)},InfiniteTree.prototype.insertNodeAfter=function(newNode,referenceNode){if(!ensureNodeInstance(referenceNode))return!1;var parentNode=referenceNode.getParent(),index=parentNode.children.indexOf(referenceNode)+1,newNodes=[].concat(newNode||[]);return this.addChildNodes(newNodes,index,parentNode)},InfiniteTree.prototype.insertNodeBefore=function(newNode,referenceNode){if(!ensureNodeInstance(referenceNode))return!1;var parentNode=referenceNode.getParent(),index=parentNode.children.indexOf(referenceNode),newNodes=[].concat(newNode||[]);return this.addChildNodes(newNodes,index,parentNode)},InfiniteTree.prototype.loadData=function(){var _this5=this,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.nodes=(0,_flattree.flatten)(data,{openAllNodes:this.options.autoOpen}),this.nodeTable.clear(),this.state.openNodes=this.nodes.filter(function(node){return node.hasChildren()&&node.state.open}),this.state.selectedNode=null;var rootNode=function(){for(var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;node&&null!==node.parent;)node=node.parent;return node}(this.nodes.length>0?this.nodes[0]:null);this.state.rootNode=rootNode||createRootNode(this.state.rootNode),this.flattenChildNodes(this.state.rootNode).forEach(function(node){void 0!==node.id&&_this5.nodeTable.set(node.id,node)}),this.rows.length=this.nodes.length;for(var i=0;i<this.nodes.length;++i){var node=this.nodes[i];this.rows[i]=this.options.rowRenderer(node,this.options)}this.update()},InfiniteTree.prototype.moveNodeTo=function(node,parentNode,index){if(!ensureNodeInstance(node)||!ensureNodeInstance(parentNode))return!1;for(var p=parentNode;null!==p;p=p.parent)if(p===node)return error("Cannot move an ancestor node (id="+node.id+") to the specified parent node (id="+parentNode.id+")."),!1;return this.removeNode(node)&&this.addChildNodes(node,index,parentNode)},InfiniteTree.prototype.openNode=function(node,options){var _this6=this,_options2=_extends({},options),_options2$async=_options2.async,async=void 0!==_options2$async&&_options2$async,_options2$asyncCallba=_options2.asyncCallback,asyncCallback=void 0===_options2$asyncCallba?noop:_options2$asyncCallba,_options2$silent=_options2.silent,silent=void 0!==_options2$silent&&_options2$silent;if(!ensureNodeInstance(node))return!1;if(!this.nodeTable.has(node.id))return error("Cannot open node with the given node id:",node.id),!1;if(this.state.openNodes.indexOf(node)>=0)return!1;this.emit("willOpenNode",node);var nodeIndex=this.nodes.indexOf(node),fn=function(){node.state.open=!0,_this6.state.openNodes.indexOf(node)<0&&(_this6.state.openNodes=[node].concat(_this6.state.openNodes));var nodes=(0,_flattree.flatten)(node.children,{openNodes:_this6.state.openNodes});if(nodes.length>0&&!_this6.nodeTable.get(nodes[0])&&nodes.forEach(function(node){void 0!==node.id&&_this6.nodeTable.set(node.id,node)}),node.state.expanding=!1,nodeIndex>=0){var rows=[];rows.length=nodes.length;for(var i=0;i<nodes.length;++i){var _node=nodes[i];rows[i]=_this6.options.rowRenderer(_node,_this6.options)}_this6.nodes.splice.apply(_this6.nodes,[nodeIndex+1,0].concat(nodes)),_this6.rows.splice.apply(_this6.rows,[nodeIndex+1,0].concat(rows)),_this6.rows[nodeIndex]=_this6.options.rowRenderer(node,_this6.options),_this6.update()}silent||_this6.emit("openNode",node),"function"==typeof asyncCallback&&asyncCallback()};return nodeIndex<0?(node.state.expanding=!0,async?setTimeout(fn,0):fn(),!0):!node.hasChildren()&&node.loadOnDemand?"function"==typeof this.options.loadNodes&&(!0!==node.state.loading&&(node.state.loading=!0,this.rows[nodeIndex]=this.options.rowRenderer(node,this.options),this.update(),setTimeout(function(){_this6.options.loadNodes(node,function(err,nodes){var done=arguments.length>2&&void 0!==arguments[2]?arguments[2]:noop;if(nodes=(0,_ensureArray2.default)(nodes),err||0===nodes.length)return node.state.loading=!1,_this6.rows[nodeIndex]=_this6.options.rowRenderer(node,_this6.options),_this6.update(),void("function"==typeof done&&done());_this6.addChildNodes(nodes,node),node.hasChildren()?_this6.openNode(node,_extends({},options,{async:!0,asyncCallback:function(){node.state.loading=!1;var nodeIndex=_this6.nodes.indexOf(node);_this6.rows[nodeIndex]=_this6.options.rowRenderer(node,_this6.options),_this6.update(),"function"==typeof done&&done()}})):(node.state.loading=!1,_this6.rows[nodeIndex]=_this6.options.rowRenderer(node,_this6.options),_this6.update(),"function"==typeof done&&done())})},0),!0)):(node.state.expanding=!0,this.rows[nodeIndex]=this.options.rowRenderer(node,this.options),this.update(),async?setTimeout(fn,0):fn(),!0)},InfiniteTree.prototype.removeChildNodes=function(parentNode,options){var _this7=this;if(!ensureNodeInstance(parentNode))return!1;if(0===parentNode.children.length)return!1;if(parentNode===this.state.rootNode)return this.clear(),!0;var parentNodeIndex=this.nodes.indexOf(parentNode);if(parentNodeIndex>=0&&this.state.selectedNode){var selectedIndex=this.nodes.indexOf(this.state.selectedNode),rangeFrom=parentNodeIndex+1,rangeTo=parentNodeIndex+parentNode.state.total;rangeFrom<=selectedIndex&&selectedIndex<=rangeTo&&(parentNode===this.state.rootNode?this.selectNode(null,options):this.selectNode(parentNode,options))}for(var removedNodes=this.flattenChildNodes(parentNode),deleteCount=parentNode.state.total,p=parentNode;null!==p;p=p.parent)p.state.total=p.state.total-deleteCount;return parentNode.children=[],parentNode.state.open=parentNode.state.open&&parentNode.children.length>0,parentNodeIndex>=0&&(this.nodes.splice(parentNodeIndex+1,deleteCount),this.rows.splice(parentNodeIndex+1,deleteCount),this.rows[parentNodeIndex]=this.options.rowRenderer(parentNode,this.options)),this.state.openNodes=this.state.openNodes.filter(function(node){return removedNodes.indexOf(node)<0&&node.hasChildren()&&node.state.open}),removedNodes.forEach(function(node){_this7.nodeTable.unset(node.id)}),this.update(),!0},InfiniteTree.prototype.removeNode=function(node,options){var _this8=this;if(!ensureNodeInstance(node))return!1;var parentNode=node.parent;if(!parentNode)return!1;var nodeIndex=this.nodes.indexOf(node),parentNodeIndex=this.nodes.indexOf(parentNode);if(nodeIndex>=0&&this.state.selectedNode){var selectedIndex=this.nodes.indexOf(this.state.selectedNode),rangeFrom=nodeIndex,rangeTo=nodeIndex+node.state.total+1;if(rangeFrom<=selectedIndex&&selectedIndex<=rangeTo){var selectedNode=node.getNextSibling()||node.getPreviousSibling()||node.getParent();selectedNode===this.state.rootNode?this.selectNode(null,options):this.selectNode(selectedNode,options)}}for(var removedNodes=this.flattenNode(node),deleteCount=node.state.total+1,p=parentNode;null!==p;p=p.parent)p.state.total=p.state.total-deleteCount;return parentNode.children.splice(parentNode.children.indexOf(node),1),parentNode.state.open=parentNode.state.open&&parentNode.children.length>0,nodeIndex>=0&&(this.nodes.splice(nodeIndex,deleteCount),this.rows.splice(nodeIndex,deleteCount)),parentNodeIndex>=0&&(this.rows[parentNodeIndex]=this.options.rowRenderer(parentNode,this.options)),this.state.openNodes=this.state.openNodes.filter(function(node){return removedNodes.indexOf(node)<0&&node.hasChildren()&&node.state.open}),removedNodes.forEach(function(node){_this8.nodeTable.unset(node.id)}),this.update(),!0},InfiniteTree.prototype.scrollToNode=function(node){if(!ensureNodeInstance(node))return!1;var nodeIndex=this.nodes.indexOf(node);if(nodeIndex<0)return!1;if(!this.contentElement)return!1;for(var firstChild=this.contentElement.firstChild;firstChild;){if((firstChild.className||"").indexOf("clusterize-extra-row")<0&&firstChild.offsetHeight>0)break;firstChild=firstChild.nextSibling}var offsetHeight=firstChild&&firstChild.offsetHeight||0;offsetHeight>0&&this.scrollTop(nodeIndex*offsetHeight);var nodeSelector="["+this.options.nodeIdAttr+'="'+node.id+'"]',nodeEl=this.contentElement.querySelector(nodeSelector);return nodeEl&&this.scrollTop(nodeEl.offsetTop),!0},InfiniteTree.prototype.scrollTop=function(value){return this.scrollElement?(void 0!==value&&(this.scrollElement.scrollTop=Number(value)),this.scrollElement.scrollTop):0},InfiniteTree.prototype.selectNode=function(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments[1],_options3=this.options,selectable=_options3.selectable,shouldSelectNode=_options3.shouldSelectNode,_options4=_extends({},options),_options4$autoScroll=_options4.autoScroll,autoScroll=void 0===_options4$autoScroll||_options4$autoScroll,_options4$silent=_options4.silent,silent=void 0!==_options4$silent&&_options4$silent;if(this.emit("willSelectNode",node),!selectable)return!1;if("function"==typeof shouldSelectNode&&!shouldSelectNode(node))return!1;if(node===this.state.rootNode)return!1;if(null===node){if(this.state.selectedNode){var selectedNode=this.state.selectedNode,selectedIndex=this.nodes.indexOf(this.state.selectedNode);return selectedNode.state.selected=!1,this.rows[selectedIndex]=this.options.rowRenderer(selectedNode,this.options),this.state.selectedNode=null,this.update(),silent||this.emit("selectNode",null),!0}return!1}if(!ensureNodeInstance(node))return!1;var nodeIndex=this.nodes.indexOf(node);if(nodeIndex<0)return!1;if(this.state.selectedNode!==node&&(node.state.selected=!0,this.rows[nodeIndex]=this.options.rowRenderer(node,this.options)),this.state.selectedNode){var _selectedNode=this.state.selectedNode,_selectedIndex=this.nodes.indexOf(this.state.selectedNode);_selectedNode.state.selected=!1,this.rows[_selectedIndex]=this.options.rowRenderer(_selectedNode,this.options)}if(this.state.selectedNode!==node){if(this.state.selectedNode=node,silent||this.emit("selectNode",node),autoScroll&&this.scrollElement&&this.contentElement){var nodeSelector="["+this.options.nodeIdAttr+'="'+node.id+'"]',nodeEl=this.contentElement.querySelector(nodeSelector);if(nodeEl){var offsetTop=nodeEl.offsetTop||0,offsetHeight=nodeEl.offsetHeight||0;offsetTop<this.scrollElement.scrollTop&&(this.scrollElement.scrollTop=offsetTop),offsetTop+offsetHeight>=this.scrollElement.scrollTop+this.scrollElement.clientHeight&&(this.scrollElement.scrollTop+=offsetHeight)}}}else this.state.selectedNode=null,silent||this.emit("selectNode",null);return this.update(),!0},InfiniteTree.prototype.swapNodes=function(node1,node2){if(!ensureNodeInstance(node1)||!ensureNodeInstance(node1.parent))return!1;if(!ensureNodeInstance(node2)||!ensureNodeInstance(node2.parent))return!1;for(var parentNode1=node1.parent,parentNode2=node2.parent,p=parentNode1;null!==p;p=p.parent)if(p===node2)return error("Cannot swap two nodes with one being an ancestor of the other."),!1;for(var _p=parentNode2;null!==_p;_p=_p.parent)if(_p===node1)return error("Cannot swap two nodes with one being an ancestor of the other."),!1;var nodeIndex1=parentNode1.children.indexOf(node1),nodeIndex2=parentNode2.children.indexOf(node2);return this.moveNodeTo(node1,parentNode2,nodeIndex2)&&this.moveNodeTo(node2,parentNode1,nodeIndex1)},InfiniteTree.prototype.toggleNode=function(node,options){return!!ensureNodeInstance(node)&&(this.state.openNodes.indexOf(node)>=0?this.closeNode(node,options):this.openNode(node,options))},InfiniteTree.prototype.toString=function(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return node||(node=this.state.rootNode),function traverse(node){var s="[";if(node&&node.children)for(var i=0;i<node.children.length;++i)!function(i){var list=[];s+="{",Object.keys(node).forEach(function(key){var value=node[key];if("parent"!==key)return"children"===key?void list.push('"'+key+'":'+traverse(node.children[i])):void("string"==typeof value||"object"===(void 0===value?"undefined":_typeof(value))?list.push('"'+key+'":'+JSON.stringify(value)):list.push('"'+key+'":'+value))}),s+=list.join(","),s=s+"}"+(i===node.children.length-1?"":",")}(i);return s+="]"}(node)},InfiniteTree.prototype.unfilter=function(){this.filtered=!1;var rootNode=this.state.rootNode;!function traverse(node){if(node&&(delete node.state.filtered,node.children))for(var i=0;i<node.children.length;++i){var childNode=node.children[i];childNode&&traverse(childNode)}}(rootNode),this.rows.length=this.nodes.length;for(var i=0;i<this.nodes.length;++i){var node=this.nodes[i];this.rows[i]=this.options.rowRenderer(node,this.options)}this.update()},InfiniteTree.prototype.update=function(){if(this.emit("contentWillUpdate"),this.clusterize){var rows=this.rows.filter(function(row){return!!row});this.clusterize.update(rows)}this.emit("contentDidUpdate")},InfiniteTree.prototype.updateNode=function(node,data,options){if(ensureNodeInstance(node)){data=_extends({},data),void 0!==data.id&&null!==data.id&&(this.nodeTable.unset(node.id),this.nodeTable.set(data.id,node),node.id=data.id),delete data.id,delete data.children,delete data.parent,delete data.state,node=(0,_extend2.default)(node,data);var nodeIndex=this.nodes.indexOf(node);if(nodeIndex>=0){var _options5=_extends({},options),_options5$shallowRend=_options5.shallowRendering,shallowRendering=void 0!==_options5$shallowRend&&_options5$shallowRend;if(this.rows[nodeIndex]=this.options.rowRenderer(node,this.options),!shallowRendering)for(var total=node.state.total,rangeFrom=nodeIndex+1,rangeTo=nodeIndex+total,index=rangeFrom;index<=rangeTo;++index)this.rows[index]=this.options.rowRenderer(this.nodes[index],this.options);this.update()}}},InfiniteTree}(_events2.default.EventEmitter);exports.default=InfiniteTree},function(module,exports){function indexOf(arr,prop){if(arr.indexOf)return arr.indexOf(prop);for(var i=0,len=arr.length;i<len;i++)if(arr[i]===prop)return i;return-1}function ElementClass(opts){if(!(this instanceof ElementClass))return new ElementClass(opts);opts||(opts={}),opts.nodeType&&(opts={el:opts}),this.opts=opts,this.el=opts.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}module.exports=function(opts){return new ElementClass(opts)},ElementClass.prototype.add=function(className){var el=this.el;if(el){if(""===el.className)return el.className=className;var classes=el.className.split(" ");return indexOf(classes,className)>-1?classes:(classes.push(className),el.className=classes.join(" "),classes)}},ElementClass.prototype.remove=function(className){var el=this.el;if(el&&""!==el.className){var classes=el.className.split(" "),idx=indexOf(classes,className);return idx>-1&&classes.splice(idx,1),el.className=classes.join(" "),classes}},ElementClass.prototype.has=function(className){var el=this.el;if(el){return indexOf(el.className.split(" "),className)>-1}},ElementClass.prototype.toggle=function(className){this.el&&(this.has(className)?this.remove(className):this.add(className))}},function(module,exports){function isNode(val){return!(!val||"object"!=typeof val)&&("object"==typeof window&&"object"==typeof window.Node?val instanceof window.Node:"number"==typeof val.nodeType&&"string"==typeof val.nodeName)}module.exports=isNode},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0,exports.Node=exports.flatten=void 0;var _flatten=__webpack_require__(12),_flatten2=_interopRequireDefault(_flatten),_node=__webpack_require__(3),_node2=_interopRequireDefault(_node);exports.flatten=_flatten2.default,exports.Node=_node2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _extend=__webpack_require__(2),_extend2=_interopRequireDefault(_extend),_node=__webpack_require__(3),_node2=_interopRequireDefault(_node),flatten=function(){var nodes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nodes=[].concat(nodes);var flatten=[],stack=[],pool={lastChild:{}};options.openAllNodes=!!options.openAllNodes,options.openNodes=options.openNodes||[],options.throwOnError=!!options.throwOnError;var firstNode=nodes.length>0?nodes[0]:null,parentNode=firstNode?firstNode.parent:null;!parentNode||parentNode instanceof _node2.default||(parentNode=new _node2.default(parentNode));var rootNode=parentNode||new _node2.default({parent:null,children:nodes,state:{depth:-1,open:!0,path:"",prefixMask:"",total:0}});if(rootNode===parentNode)for(var subtotal=rootNode.state.total||0,p=rootNode;p;){var _p$state=p.state,path=_p$state.path,_p$state$total=_p$state.total,total=void 0===_p$state$total?0:_p$state$total;if(p.isLastChild()&&path&&(pool.lastChild[path]=!0),p.state.total=total-subtotal,p.state.total<0){if(options.throwOnError)throw new Error("The node might have been corrupted: id="+JSON.stringify(p.id)+", state="+JSON.stringify(p.state));console&&console.log("Error: The node might have been corrupted: id=%s, parent=%s, children=%s, state=%s",JSON.stringify(p.id),p.parent,p.children,JSON.stringify(p.state))}p=p.parent}for(stack.push([rootNode,rootNode.state.depth,0]);stack.length>0;)for(var _stack$pop=stack.pop(),current=_stack$pop[0],depth=_stack$pop[1],index=_stack$pop[2];index<current.children.length;)!function(){var node=current.children[index];node instanceof _node2.default||(node=new _node2.default(node)),node.parent=current,node.children=node.children||[],node.parent.children[index]=node;var path=current.state.path+"."+index,open=node.hasChildren()&&function(){var openAllNodes=options.openAllNodes,openNodes=options.openNodes;return!!openAllNodes||(openNodes.indexOf(node)>=0||openNodes.indexOf(node.id)>=0)}(),prefixMask=function(prefix){for(var mask="";prefix.length>0;)prefix=prefix.replace(/\.\d+$/,""),mask=!prefix||pool.lastChild[prefix]?"0"+mask:"1"+mask;return mask}(path);node.isLastChild()&&(pool.lastChild[path]=!0),node.state=(0,_extend2.default)({},node.state,{depth:depth+1,open:open,path:path,prefixMask:prefixMask,total:0});for(var parentDidOpen=!0,_p=node;null!==_p.parent;){if(!1===_p.parent.state.open){parentDidOpen=!1;break}_p=_p.parent}if(parentDidOpen){flatten.push(node);for(var _p2=node;null!==_p2.parent;)_p2.parent.state.total++,_p2=_p2.parent}++index,node.hasChildren()&&(stack.push([current,depth,index]),index=0,depth+=1,current=node)}();return flatten};exports.default=flatten},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_events=__webpack_require__(0),_ensureArray=__webpack_require__(4),_ensureArray2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ensureArray),_browser=__webpack_require__(14),_dom=__webpack_require__(5),ie=(0,_browser.getIEVersion)(),Clusterize=function(_EventEmitter){function Clusterize(options){_classCallCheck(this,Clusterize);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));if(_this.options={rowsInBlock:50,blocksInCluster:4,tag:null,emptyClass:"",emptyText:"",keepParity:!0},_this.state={lastClusterIndex:-1,itemHeight:0,blockHeight:0,clusterHeight:0},_this.scrollElement=null,_this.contentElement=null,_this.rows=[],_this.cache={},_this.scrollEventListener=function(){var debounce=null;return function(){navigator.platform.toLowerCase().indexOf("mac")>=0&&("none"!==_this.contentElement.style.pointerEvents&&(_this.contentElement.style.pointerEvents="none"),debounce&&(clearTimeout(debounce),debounce=null),debounce=setTimeout(function(){debounce=null,_this.contentElement.style.pointerEvents="auto"},50));var clusterIndex=_this.getCurrentClusterIndex();_this.state.lastClusterIndex!==clusterIndex&&_this.changeDOM(),_this.state.lastClusterIndex=clusterIndex}}(),_this.resizeEventListener=function(){var debounce=null;return function(){debounce&&(clearTimeout(debounce),debounce=null),debounce=setTimeout(function(){var prevItemHeight=_this.state.itemHeight,current=_this.computeHeight();current.itemHeight>0&&prevItemHeight!==current.itemHeight&&(_this.state=_extends({},_this.state,current),_this.update(_this.rows))},100)}}(),!(_this instanceof Clusterize)){var _ret;return _ret=new Clusterize(options),_possibleConstructorReturn(_this,_ret)}if(_this.options=Object.keys(_this.options).reduce(function(acc,key){return void 0!==options[key]?acc[key]=options[key]:acc[key]=_this.options[key],acc},{}),_this.scrollElement=options.scrollElement,_this.contentElement=options.contentElement,_this.contentElement.hasAttribute("tabindex")||_this.contentElement.setAttribute("tabindex",0),Array.isArray(options.rows))_this.rows=options.rows;else{_this.rows=[];for(var nodes=_this.contentElement.children,length=nodes.length,i=0;i<length;++i){var node=nodes[i];_this.rows.push(node.outerHTML||"")}}var scrollTop=_this.scrollElement.scrollTop;return _this.changeDOM(),_this.scrollElement.scrollTop=scrollTop,(0,_dom.addEventListener)(_this.scrollElement,"scroll",_this.scrollEventListener),(0,_dom.addEventListener)(window,"resize",_this.resizeEventListener),_this}return _inherits(Clusterize,_EventEmitter),Clusterize.prototype.destroy=function(clean){(0,_dom.removeEventListener)(this.scrollElement,"scroll",this.scrollEventListener),(0,_dom.removeEventListener)(window,"resize",this.resizeEventListener);var rows=clean?this.generateEmptyRow():this.rows();this.setContent(rows.join(""))},Clusterize.prototype.update=function(rows){this.rows=(0,_ensureArray2.default)(rows);var scrollTop=this.scrollElement.scrollTop;this.rows.length*this.state.itemHeight<scrollTop&&(this.scrollElement.scrollTop=0,this.state.lastClusterIndex=0),this.changeDOM(),this.scrollElement.scrollTop=scrollTop},Clusterize.prototype.clear=function(){this.rows=[],this.update()},Clusterize.prototype.append=function(rows){rows=(0,_ensureArray2.default)(rows),rows.length&&(this.rows=this.rows.concat(rows),this.changeDOM())},Clusterize.prototype.prepend=function(rows){rows=(0,_ensureArray2.default)(rows),rows.length&&(this.rows=rows.concat(this.rows),this.changeDOM())},Clusterize.prototype.computeHeight=function(){if(this.rows.length){var nodes=this.contentElement.children,node=nodes[Math.floor(nodes.length/2)],itemHeight=node.offsetHeight;if("tr"===this.options.tag&&"collapse"!==(0,_dom.getElementStyle)(this.contentElement,"borderCollapse")&&(itemHeight+=parseInt((0,_dom.getElementStyle)(this.contentElement,"borderSpacing"),10)||0),"tr"!==this.options.tag){var marginTop=parseInt((0,_dom.getElementStyle)(node,"marginTop"),10)||0,marginBottom=parseInt((0,_dom.getElementStyle)(node,"marginBottom"),10)||0;itemHeight+=Math.max(marginTop,marginBottom)}return{blockHeight:this.state.itemHeight*this.options.rowsInBlock,clusterHeight:this.state.blockHeight*this.options.blocksInCluster,itemHeight:itemHeight}}return{clusterHeight:0,blockHeight:this.state.blockHeight,itemHeight:this.state.itemHeight}},Clusterize.prototype.getCurrentClusterIndex=function(){var _state=this.state,blockHeight=_state.blockHeight,clusterHeight=_state.clusterHeight;return blockHeight&&clusterHeight?Math.floor(this.scrollElement.scrollTop/(clusterHeight-blockHeight))||0:0},Clusterize.prototype.generateEmptyRow=function(){var _options=this.options,tag=_options.tag,emptyText=_options.emptyText,emptyClass=_options.emptyClass;if(!tag||!emptyText)return[];var emptyRow=document.createElement(tag);if(emptyRow.className=emptyClass,"tr"===tag){var td=document.createElement("td");td.colSpan=100,td.appendChild(document.createTextNode(emptyText)),emptyRow.appendChild(td)}else emptyRow.appendChild(document.createTextNode(emptyText));return[emptyRow.outerHTML]},Clusterize.prototype.renderExtraTag=function(className,height){var tag=document.createElement(this.options.tag);return tag.className=["infinite-tree-extra-row","infinite-tree-"+className].join(" "),height&&(tag.style.height=height+"px"),tag.outerHTML},Clusterize.prototype.changeDOM=function(){!this.state.clusterHeight&&this.rows.length>0&&(ie&&ie<=9&&!this.options.tag&&(this.options.tag=this.rows[0].match(/<([^>\s\/]*)/)[1].toLowerCase()),this.contentElement.children.length<=1&&(this.cache.content=this.setContent(this.rows[0]+this.rows[0]+this.rows[0])),this.options.tag||(this.options.tag=this.contentElement.children[0].tagName.toLowerCase()),this.state=_extends({},this.state,this.computeHeight()));var topOffset=0,bottomOffset=0,rows=[];if(this.rows.length<this.options.rowsInBlock)rows=this.rows.length>0?this.rows:this.generateEmptyRow();else{var rowsInCluster=this.options.rowsInBlock*this.options.blocksInCluster,clusterIndex=this.getCurrentClusterIndex(),visibleStart=Math.max((rowsInCluster-this.options.rowsInBlock)*clusterIndex,0),visibleEnd=visibleStart+rowsInCluster;topOffset=Math.max(visibleStart*this.state.itemHeight,0),bottomOffset=Math.max((this.rows.length-visibleEnd)*this.state.itemHeight,0),rows=this.rows.slice(visibleStart,visibleEnd)}var content=rows.join(""),contentChanged=this.checkChanges("content",content),topOffsetChanged=this.checkChanges("top",topOffset),bottomOffsetChanged=this.checkChanges("bottom",bottomOffset);if(contentChanged||topOffsetChanged){var layout=[];topOffset>0&&(this.options.keepParity&&layout.push(this.renderExtraTag("keep-parity")),layout.push(this.renderExtraTag("top-space",topOffset))),layout.push(content),bottomOffset>0&&layout.push(this.renderExtraTag("bottom-space",bottomOffset)),this.emit("clusterWillChange"),this.setContent(layout.join("")),this.emit("clusterDidChange")}else bottomOffsetChanged&&(this.contentElement.lastChild.style.height=bottomOffset+"px")},Clusterize.prototype.setContent=function(content){if(ie&&ie<=9&&"tr"===this.options.tag){var div=document.createElement("div");div.innerHTML="<table><tbody>"+content+"</tbody></table>";for(var lastChild=this.contentElement.lastChild;lastChild;)this.contentElement.removeChild(lastChild),lastChild=this.contentElement.lastChild;for(var rowsNodes=this.getChildNodes(div.firstChild.firstChild);rowsNodes.length;)this.contentElement.appendChild(rowsNodes.shift())}else this.contentElement.innerHTML=content},Clusterize.prototype.getChildNodes=function(tag){for(var childNodes=tag.children,nodes=[],length=childNodes.length,i=0;i<length;i++)nodes.push(childNodes[i]);return nodes},Clusterize.prototype.checkChanges=function(type,value){var changed=value!==this.cache[type];return this.cache[type]=value,changed},Clusterize}(_events.EventEmitter);exports.default=Clusterize},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;exports.getIEVersion=function(){var div=document.createElement("div"),all=div.getElementsByTagName("i")||[],v=3;do{++v,div.innerHTML="\x3c!--[if gt IE "+v+"]><i></i><![endif]--\x3e"}while(all[0]);return v>4?v:document.documentMode}},function(module,exports,__webpack_require__){"use strict";var extend=function(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(void 0===target||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=0;index<sources.length;index++){var source=sources[index];if(void 0!==source&&null!==source)for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(output[key]=source[key])}return output};module.exports=extend},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},trim=exports.trim=function(str){for(var chars=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" \f\n\r\t\v";chars.indexOf(str[0])>=0;)str=str.slice(1);for(;chars.indexOf(str[str.length-1])>=0;)str=str.slice(0,-1);return str};exports.get=function(){var re=new RegExp(/[\w\-]+|\[[^\]]*\]+/g);return function(object,path,defaultValue){if(!object||"object"!==(void 0===object?"undefined":_typeof(object)))return defaultValue;path=""+path;var keys=path.match(re);if(!keys)return defaultValue;for(var i=0;i<keys.length;i++){var key=keys[i];if(key=trim(key," \f\n\r\t\v"),"["===key[0]&&(key=trim(key.slice(1,-1)," \f\n\r\t\v")),key=trim(key,"'\""),void 0===object||null===object||"object"!==(void 0===object?"undefined":_typeof(object)))break;if(void 0===(object=object[key]))break}return void 0!==object?object:defaultValue}}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var LookupTable=function(){function LookupTable(){_classCallCheck(this,LookupTable),this.data={}}return LookupTable.prototype.clear=function(){this.data={}},LookupTable.prototype.get=function(key){return this.data[key]},LookupTable.prototype.has=function(key){return void 0!==this.data[key]},LookupTable.prototype.set=function(key,value){return this.data[key]=value,value},LookupTable.prototype.unset=function(key){void 0!==this.data[key]&&delete this.data[key]},LookupTable}();exports.default=LookupTable},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0,exports.defaultRowRenderer=void 0;var _classnames=__webpack_require__(1),_classnames2=_interopRequireDefault(_classnames),_escapeHtml=__webpack_require__(6),_escapeHtml2=_interopRequireDefault(_escapeHtml),_html5Tag=__webpack_require__(19),_html5Tag2=_interopRequireDefault(_html5Tag),defaultRowRenderer=function(node,treeOptions){var id=node.id,name=node.name,_node$loadOnDemand=node.loadOnDemand,loadOnDemand=void 0!==_node$loadOnDemand&&_node$loadOnDemand,children=node.children,state=node.state,droppable=treeOptions.droppable,depth=state.depth,open=state.open,path=state.path,total=state.total,_state$selected=state.selected,selected=void 0!==_state$selected&&_state$selected,filtered=state.filtered,childrenLength=Object.keys(children).length,more=node.hasChildren();if(!1===filtered)return"";var togglerContent="";!more&&loadOnDemand&&(togglerContent="►"),more&&open&&(togglerContent="▼"),more&&!open&&(togglerContent="►");var toggler=(0,_html5Tag2.default)("a",{class:function(){return!more&&loadOnDemand?(0,_classnames2.default)(treeOptions.togglerClass,"infinite-tree-closed"):more&&open?(0,_classnames2.default)(treeOptions.togglerClass):more&&!open?(0,_classnames2.default)(treeOptions.togglerClass,"infinite-tree-closed"):""}()},togglerContent),title=(0,_html5Tag2.default)("span",{class:(0,_classnames2.default)("infinite-tree-title")},(0,_escapeHtml2.default)(name)),treeNode=(0,_html5Tag2.default)("div",{class:"infinite-tree-node",style:"margin-left: "+18*depth+"px"},toggler+title);return(0,_html5Tag2.default)("div",{"data-id":id,"data-expanded":more&&open,"data-depth":depth,"data-path":path,"data-selected":selected,"data-children":childrenLength,"data-total":total,class:(0,_classnames2.default)("infinite-tree-item",{"infinite-tree-selected":selected}),droppable:droppable},treeNode)};exports.defaultRowRenderer=defaultRowRenderer},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_escapeHtml=__webpack_require__(6),_escapeHtml2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_escapeHtml),voidElements=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];module.exports=function(tag,attrs,text){"object"===(void 0===tag?"undefined":_typeof(tag))&&(text=attrs,attrs=tag,tag="div");var voidElement=voidElements.indexOf((""+tag).toLowerCase())>=0,html="<"+tag;return attrs=_extends({},attrs),Object.keys(attrs).forEach(function(name){var value=attrs[name];"string"==typeof value?(value=(0,_escapeHtml2.default)(""+value),html+=" "+name+'="'+value+'"'):value&&(html+=" "+name)}),html+=voidElement?">":void 0!==text?">"+text+"</"+tag+">":"/>"}}])});